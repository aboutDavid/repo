var x,ActiveXObject,d=document,l=d.links,p={},w=window;function defresh(e,t){(x=w.XMLHttpRequest&&w.history?new XMLHttpRequest:new ActiveXObject).onreadystatechange=function(){function n(e){"scrollRestoration"in w.history&&(w.history.scrollRestoration="manual"),w.scrollTo(0,0),d.open(),d.write(e),d.close()}4==this.readyState&&this.responseText.indexOf("defresh.js")>=0&&("push"==t.toLowerCase()&&w.history.pushState({page:e},"",e),"replace"==t.toLowerCase()&&w.history.replaceState({page:e},"",e),n(this.responseText)),(4==this.readyState&&this.responseText.indexOf("defresh.js")<0||!w.XMLHttpRequest||!w.history)&&("replace"==t.toLowerCase()?w.location.replace(e):"push"==t.toLowerCase()?w.location.href=e:n(this.responseText))},x.open("GET",e+"#"+Date.now(),!0),x.send()}w.onkeydown=function(e){p[e.key]=!0},w.onkeyup=function(e){p[e.key]=void 0},setInterval(function(){for(var e=0;e<l.length;e++)l[e].href.indexOf(w.location.hostname)>=0&&null!=l[e].href&&null==l[e].onclick&&"_blank"!=l[e].target&&"_parent"!=l[e].target&&l[e].href.indexOf(".js")<0&&l[e].href.indexOf(".css")<0&&l[e].href.indexOf(".txt")<0&&!l[e].hasAttribute("download")&&(l[e].onclick=function(e){1!=p.Control&&1!=p.Shift&&1!=p.Meta&&"#"!=this.href.charAt(0)&&this.href!=w.location.pathname&&(e.preventDefault(),defresh(this.href,"push"))})},500),w.onpopstate=function(){defresh(w.location.pathname,"none")};
/* Credit: https://hello936.github.io/defresh/ */
